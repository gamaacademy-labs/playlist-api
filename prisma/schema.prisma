// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum PlaylistLevel {
  EASY
  MEDIUM
  HARD
}

model Playlists {
  id               String             @id @default(cuid())
  title            String             @unique
  thumbnail        String
  description      String
  duration         Int
  level            PlaylistLevel      @default(MEDIUM)
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @default(now()) @updatedAt()
  ratings          PlaylistsRatings[]
  PlaylistContents PlaylistContents[]
}

model PlaylistsRatings {
  id         String    @id @default(cuid())
  playlistId String
  rating     Int
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @default(now()) @updatedAt()
  playlist   Playlists @relation(fields: [playlistId], references: [id])
}

model PlaylistContents {
  id         String    @id @default(cuid())
  playlistId String
  contentId  String
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @default(now()) @updatedAt()
  playlist   Playlists @relation(fields: [playlistId], references: [id])
  content    Contents  @relation(fields: [contentId], references: [id])
}

model Contents {
  id           String           @id @default(cuid())
  title        String           @unique
  thumbnail    String
  linkVideo    String
  ratingVideos ContentsRating[]
  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @default(now()) @updatedAt()

  PlaylistContents PlaylistContents[]
}

model ContentsRating {
  id         String    @id @default(cuid())
  contentsId String
  rating     Int
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @default(now()) @updatedAt()
  Contents   Contents? @relation(fields: [contentsId], references: [id])
}
